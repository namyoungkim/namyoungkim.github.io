# Agent Team 구성 템플릿

> 이 프로젝트에서 Agent Teams를 사용할 때 참조하는 팀 구성 가이드입니다.
> 각 템플릿은 작업 유형별로 최적화된 팀 구성을 제안합니다.

## 사용 전 확인사항
- `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1` 환경변수 설정 확인
- 각 팀원이 서로 다른 파일/디렉토리를 담당하도록 분배
- 첫 실험은 읽기 전용(리뷰) 작업부터 시작

---

## 템플릿 1: 기능 개발 팀

새 기능을 병렬로 개발할 때 사용합니다.

```
이 기능을 개발할 에이전트 팀을 구성해줘:

1. API 담당: src/stock_screener/api/ 디렉토리 전담
   - FastAPI 라우터, Pydantic 스키마 작성
   - docs/PATTERNS.md의 FastAPI 패턴 참조

2. Service/Data 담당: src/stock_screener/services/와 src/stock_screener/data/ 전담
   - 비즈니스 로직, 외부 API 연동
   - docs/CONVENTIONS.md의 에러 핸들링 참조

3. 테스트 담당: tests/ 디렉토리 전담
   - API 담당과 Service 담당의 코드를 보고 테스트 작성
   - pytest fixture 공유 구조 설계

각자 docs/CONVENTIONS.md와 docs/PATTERNS.md를 먼저 읽을 것.
서로 파일 충돌 없도록 담당 디렉토리 외 파일 수정 금지.
```

## 템플릿 2: 코드 리뷰 팀 (읽기 전용, 추천)

PR이나 변경사항을 다각도로 리뷰할 때 사용합니다.

```
에이전트 팀으로 현재 변경사항을 리뷰해줘:

1. 로직 리뷰어: 비즈니스 로직 정확성, 엣지 케이스 분석
   - docs/MISTAKES.md를 참조하여 과거 실수 패턴 확인

2. 성능 리뷰어: N+1 쿼리, 불필요한 연산, 메모리 사용 분석
   - 특히 외부 API 호출 패턴과 DB 쿼리 효율 집중

3. 보안 리뷰어: 인젝션, 인증/인가, 민감 데이터 노출 점검
   - .env 참조 패턴, API 키 처리 방식 확인

서로 발견사항을 공유한 후, 통합 리뷰 리포트를 작성해줘.
심각도별로 분류: Critical / Warning / Suggestion
```

## 템플릿 3: 리팩토링 팀

기존 코드를 구조적으로 개선할 때 사용합니다.

```
이 모듈을 리팩토링할 에이전트 팀을 구성해줘:

1. 분석가: 현재 코드 구조 분석, 문제점 도출
   - 순환 의존성, 함수 길이, 코드 중복 파악
   - 리팩토링 계획서를 공유 태스크로 작성

2. 구현자: 분석가의 계획에 따라 리팩토링 실행
   - 한 번에 하나의 리팩토링만 수행
   - 각 단계마다 테스트 통과 확인

3. 검증자: 리팩토링 전후 동작 동일성 검증
   - 기존 테스트 통과 확인
   - 누락된 테스트 추가

구현자와 검증자가 같은 파일을 동시에 수정하지 않도록 순서 조율.
```

## 템플릿 4: 설정 최적화 팀

Claude Code 설정 자체를 최적화할 때 사용합니다.

```
Claude Code 설정을 최적화할 에이전트 팀을 구성해줘:

1. CLAUDE.md 분석가: CLAUDE.md와 docs/ 문서 검토
   - 중복 규칙, 불필요한 규칙, 누락된 규칙 파악
   - 가지치기 대상 목록 작성

2. Hooks/MCP 전문가: settings.json과 .mcp.json 검토
   - 현재 hooks 효과 분석, 새 hook 제안
   - MCP 서버 활용도 분석

3. 워크플로우 최적가: commands, agents, skills 검토
   - 자주 쓰는 워크플로우 자동화 방안
   - 새 command/agent 제안

각자 분석 후 서로 발견사항 공유, 통합 최적화 가이드 작성.
실제 변경은 사람 승인 후에만 실행.
```

---

## 팀 운영 팁

- **리드는 코딩하지 않는다**: Shift+Tab으로 오케스트레이션 모드 고정
- **파일 소유권 명확히**: 팀원별 담당 디렉토리를 명시적으로 지정
- **주기적 체크인**: 팀이 15분 이상 무인 상태로 돌아가지 않도록 확인
- **비용 인식**: 팀원 3명 = 토큰 ~4-5배, 정당화되는 작업에만 사용
